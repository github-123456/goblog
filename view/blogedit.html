{{define "content"}}
    <div class="container">
        <form action="/blogsave" method="post">
            <div id="error"></div>
            <div class="form-group">
                <label>标题</label>
                <input type="text" class="form-control" name="title" placeholder="请输入标题" required>
            </div>
            <div class="form-group">
                <label>正文</label>
                <textarea class="form-control" name="content" rows="3" placeholder="正文内容..." required></textarea>
            </div>
            <div class="form-group">
                <label>分类</label>
                <select class="form-control col-lg-2" name="categoryId" required>
                    {{range .CategoryList}}
                        <option value="{{.Id}}">{{.Name}}</option>
                    {{end}}
                </select>
            </div>
            <div class="form-group">
                <label>类型</label>
                <select class="form-control col-lg-1" name="type">
                    <option value="1">公开</option>
                    <option value="2">私有</option>
                    <option value="3">加密</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">发布</button>
        </form>
    </div>
{{end}}

{{define "script"}}
    <script>
        app.ajaxSubmit($("form:last"), {
            before: function () {
                app.closeError($('#error'))
            },
            success: function (res) {
                if (res.error) {
                    app.showError($('#error'), res.error)
                } else {
                    window.location.href = "/bloglist"
                }
            }
        })
    </script>
{{end}}